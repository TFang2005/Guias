#include <stdio.h>
#include <stdlib.h>
///**/////////////////////////////////////////////////////////////
///**STRUCTS//////////////////////////////////////////////////
///**/////////////////////////////////////////////////////////////

///1
typedef struct
{
    int matricula;
    char nombre[30];
    char genero;
} stAlumno;

///**/////////////////////////////////////////////////////////////
///**PROTOTIPADO//////////////////////////////////////////////////
///**/////////////////////////////////////////////////////////////

///1
stAlumno CargarAlumno();
int CargarArrStruct(stAlumno A[], int dimension);
///2
void MostrarAlumno(stAlumno A);
void MostarArrStruct(stAlumno A[], int validos);
///3
void BuscarAlumno(stAlumno A[], int validos, int matricula);
///4
void OrdenarPorSeleccion(stAlumno A[], int  validos);
void MostarArrStruct(stAlumno A[], int validos);
///5




///**/////////////////////////////////////////////////////////////
///**MAIN/////////////////////////////////////////////////////////
///**/////////////////////////////////////////////////////////////


int main()
{
    int validos=0, opcion=0, matricula=0, resul=0, flag=0;
    char continuar='s', Eleccion;

    stAlumno ArrAlumno[30];

    do
    {
        printf("---MENU---");
        printf("\n1.Cargar Alumnos\n2.Mostrar Alumnos\n3.Buscar Alumno\n4.Ordenar Alumnos.\n5.Filtrar alumnos por genero.\n");
        printf("\nIngrese la opcion que desea realizar: \n");
        scanf("%d", &opcion);

        switch(opcion)
        {
        case 1:///1
            validos= CargarArrStruct(ArrAlumno, 30);
            printf("\nSe cargaron %d alumnos.\n", validos);
            break;
        case 2:///2
            MostarArrStruct(ArrAlumno, validos);
            break;
        case 3:///3
            printf("\nIngrese la matricula que desea buscar: \n");
            scanf("%d", &matricula);

            BuscarAlumno(ArrAlumno, validos, matricula);

            break;
        case 4:///4
            printf("\nOrdenando alumnos.\n");
            OrdenarPorSeleccion(ArrAlumno, validos);
            MostarArrStruct(ArrAlumno, validos);
            break;
        case 5:
            printf("\nIngrese el genero que desea mostrar: (m/f/o)\n");
            scanf("%c", &Eleccion);


            break;

        default:
            printf("\nERROR: Ingrese una opcion valida\n");
            break;
        }
    }
    while(continuar=='s');

    return 0;
}

///**/////////////////////////////////////////////////////////////
///**FUNCIONES////////////////////////////////////////////////////
///**/////////////////////////////////////////////////////////////

///1/////////////////////////////////////////
stAlumno CargarAlumno()
{
    stAlumno A;

    printf("\nIngrese la matricula del alumno: \n");
    scanf("%d", &A.matricula);

    printf("\nIngrese el nombre del alumno: \n");
    fflush(stdin);
    gets(A.nombre);

    printf("\nIngrese el genero del alumno (m/f/o)\n");
    fflush(stdin);
    scanf("%c", &A.genero);

    return A;
}

int CargarArrStruct(stAlumno A[], int dimension)
{
    int validos=0;
    char continuar='s';

    while(validos<dimension && continuar=='s')
    {
        A[validos]=CargarAlumno();
        validos++;

        printf("\Desea seguir cargando alumnos? (s|n)");
        fflush(stdin);
        scanf("%c", &continuar);
    }
    return validos;
}

///2////////////////////////////////////////////
void MostrarAlumno(stAlumno A)
{
    printf("\nLa matricula del alumno es: %d\n", A.matricula);
    printf("\nEl nombre del alumno es: %s\n", A.nombre);
    printf("\nEl genero del alumno es: %c\n", A.genero);
}

void MostarArrStruct(stAlumno A[], int validos)
{
    int i=0;

    for(i=0; i<validos; i++)
    {
        MostrarAlumno(A[i]);
        printf("\n--------------------\n");
    }
}

///3///////////////////////////////////////////////
void BuscarAlumno(stAlumno A[], int validos, int matricula)
{
    int i=0;

    while(i<validos)
    {
        if(A[i].matricula==matricula)
        {
            printf("\n--------------------\n");
            MostrarAlumno(A[i]);
            printf("\n--------------------\n");
            return 0;
        }
        else
        {
            i++;
        }
    }
}

///4
int SubFuncion(stAlumno A[], int validos,int pos)
{
    int menor=A[pos].matricula;
    int PosMenor=pos;
    int index=pos+1;

    while(index<validos)
    {
        if(menor>A[index].matricula)
        {
            menor=A[index].matricula;
            PosMenor=index;
        }
        else
        {
            index++;
        }
    }
    return PosMenor;
}

void OrdenarPorSeleccion(stAlumno A[], int  validos)
{
    int aux;
    int Posmenor;
    int i=0;

    while(i<validos-1)
    {
        Posmenor= SubFuncion(A, validos, i);

        aux=A[Posmenor].matricula;

        A[Posmenor].matricula=A[i].matricula;

        A[i].matricula=aux;

        i++;
    }
}

///5
int SubFuncion(stAlumno A[], int validos, char Eleccion)
{
    int flag=0;
    int i=0;

    if(A[i].genero==Eleccion && flag==0)
    {
        flag=1;
    }

    return flag;
}

void MostarGenero(stAlumno A[], int validos)
{
    int i=0,flag=0;
    
    for(i=0;i<validos;i++)
    {
        flag=SubFuncion(A, validos, Eleccion);
        
        
    }
}




















